Create a step-by-step execution plan for the user's request.

USER REQUEST:
{user_message}

GATHERED INFORMATION:
{gathered_info}

AVAILABLE TOOLS:
{tool_descriptions}

Create a plan with concrete steps. Respond with JSON:

{
  "type": "plan",
  "goal": "...",
  "assumptions": ["..."],
  "steps": [
    {
      "description": "...",
      "expected_outcome": "...",
      "action": { "tool": "tool_name", "args": { ... } }
    }
  ]
}

Guidelines:
- Each step should have exactly ONE action (tool call OR ask_user OR think)
- Steps should be atomic and verifiable
- Expected outcomes should be specific and measurable
- Order steps logically (dependencies first)

Notes:
- File tool paths are always relative to the configured vault root; never ask for the vault root path.
- If a file path is missing, ask for the relative path and filename only.
